# Flutter Kafka 应用 - 产品需求文档

## 1. 产品概述

Flutter Kafka 应用是一个跨平台的 Kafka 管理和使用工具，旨在帮助用户轻松连接到 Kafka 集群，管理主题，发送和消费消息。

## 2. 核心功能

### 2.1 连接管理
- [x] 手动输入 Kafka 集群地址和端口
- [x] 保存常用连接配置
- [x] 从保存的连接中选择
- [ ] 连接测试功能

### 2.2 主题管理
- [x] 查看所有主题列表
- [x] 主题搜索功能
- [ ] 创建新主题
- [ ] 删除主题
- [ ] 查看主题详细信息（分区数、副本数等）

### 2.3 消息发送
- [x] 选择目标主题
- [x] 输入消息内容
- [x] 发送消息
- [ ] 消息格式化（JSON、文本）
- [ ] 批量发送消息

### 2.4 消息消费
- [x] 选择消费主题
- [x] 设置消费组
- [x] 选择消费偏移量（earliest/latest）
- [x] 开始/停止消费
- [x] 查看消费的消息列表
- [ ] 消息过滤功能
- [ ] 按时间戳查询消息
- [ ] 消息导出功能

### 2.5 用户体验
- [x] 响应式设计，适配不同屏幕尺寸
- [x] 加载状态提示
- [ ] 错误提示和处理
- [ ] 主题设置（深色模式等）
- [ ] 操作历史记录

## 3. 用户界面设计

### 3.1 连接界面
- 简洁的连接表单
- 保存连接的选项
- 已保存连接的列表

### 3.2 主题列表界面
- 主题名称列表
- 操作按钮（发送/消费消息）
- 搜索框

### 3.3 消息发送界面
- 主题选择下拉框
- 消息输入区域
- 发送按钮
- 发送状态提示

### 3.4 消息消费界面
- 主题选择下拉框
- 消费组输入框
- 偏移量选择
- 消息列表
- 操作按钮（开始/停止消费）

## 4. 用户流程

1. **连接到 Kafka**
   - 用户输入 Kafka 集群地址和端口
   - 点击连接按钮
   - 系统验证连接并获取主题列表

2. **发送消息**
   - 用户从主题列表中选择一个主题
   - 点击发送消息按钮
   - 输入消息内容
   - 点击发送按钮

3. **消费消息**
   - 用户从主题列表中选择一个主题
   - 点击消费消息按钮
   - 设置消费组和偏移量
   - 点击开始消费按钮
   - 查看消费的消息列表

## 5. 技术要求

- 支持多平台（iOS、Android、Web、Desktop）
- 使用 Flutter 3.0+
- 使用 Provider 进行状态管理
- 使用 Kafka C/C++ 客户端通过 FFI 实现
- 响应式设计

## 6. 未来规划

- 支持 Kafka 集群监控
- 支持多个消费组的管理
- 支持消息压缩
- 支持 Schema Registry 集成
- 支持 SSL 连接

## 7. 版本计划

### V1.0
- 基本的连接功能
- 主题列表显示
- 简单的消息发送和消费

### V1.1
- 连接保存功能
- 消息格式化
- 错误处理和用户反馈

### V1.2
- 主题管理功能
- 高级消息查询
- 导出功能

### V2.0
- 集群监控
- 多消费组管理
- Schema Registry 集成